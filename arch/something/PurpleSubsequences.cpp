#include "../l/lib.h"
// #include "../l/mod.h"

class PurpleSubsequences {
public:
    long long count(vector <int> A, int L) {
        int N = A.size();
        vector<int> Prev(N, -1);
        for (int i = 0; i < N; ++i) {
            for (int j = 0; j < i; ++j) {
                if (A[i] == A[j]) Prev[i] = j;
            }
        }

        vector<map<int, ll>> D(N+1);
        D[0][numeric_limits<int>::max()] = 1;
        for (int i = 0; i < N; ++i) {
            for (int j = 0; j <= i; ++j) {
                if (Prev[i] < j) {
                    for (auto &d: D[j]) {
                        int s = d.x;
                        for (int k = 0; k < 5*L; k += 5) {
                            int l = (s>>k) & 31;
                            if (l >= A[i]) {
                                s ^= (l^A[i]) << k;
                                break;
                            }
                        }

                        D[i+1][s] += d.y;
                    }
                }
            }
        }

        ll ans = 0;
        for (int i = 0; i <= N; ++i) {
            for (auto &d: D[i]) {
                int l = (d.x>>(5*(L-1))) & 31;
                if (l != 31) ans += d.y;
            }
        }
        return ans;
    }

    void solve(istream& cin, ostream& cout) {
        cout << count({4,7,4,7},1) << '\n';
        cout << count({1,1,2,2,3,3}, 3) << '\n';
        cout << count({1,2,3,1,2,3}, 3) << '\n';
        cout << count({1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20}, 4) << '\n';
        cout << count({1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20}, 5) << '\n';
        cout << count({1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20}, 6) << '\n';
        cout << count({1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20}, 4) << '\n';
        cout << count({1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20}, 5) << '\n';
        cout << count({1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20}, 6) << '\n';
        cout << count({1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20}, 4) << '\n';
        cout << count({1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20}, 5) << '\n';
        cout << count({1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20}, 6) << '\n';
    }
};
